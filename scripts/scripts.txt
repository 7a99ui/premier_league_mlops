# Valider les features engineerées
python src\data\validation.py --mode features --features-path data\processed\v1\features.parquet



#la validation des données brutes
python src\data\validation.py --mode raw --seasons 2015-2016 2016-2017 2017-2018 2018-2019 2019-2020 2020-2021 2021-2022 2022-2023


# Préparer les données pour le modeling
python src\data\prepare.py --features-path data\processed\v1\features.parquet --output-dir data\processed\v1 --min-gameweek 10 --max-missing-pct 30



# Lancer le pipeline complet (3 phases)
python src\models\train.py --phase all --data-dir data\processed\v1 --top-n 3




# Test v1 - simple
echo "=== TEST v1 SIMPLE ==="
python src\models\predict.py --season 2022-2023 --gameweek 38 --data-version v1

# Test v1 - évolution  
echo "=== TEST v1 EVOLUTION ==="
python src\models\predict.py --season 2022-2023 --gameweek 38 --evolution --data-version v1

# Test v2 - simple
echo "=== TEST v2 SIMPLE ==="
python src\models\predict.py --season 2023-2024 --gameweek 38 --features-path "data/processed/v2/features.parquet" --data-version v2

# Test v2 - évolution
echo "=== TEST v2 EVOLUTION ==="
python src\models\predict.py --season 2023-2024 --gameweek 38 --evolution --features-path "data/processed/v2/features.parquet" --data-version v2






python train.py --data-dir data/processed/v1 --phase all --top-n 3 --register-models --auto-promote


### 2️⃣ `--data-dir data/processed/v1`

* Spécifie le **dossier contenant les jeux de données**.
* Ici, `data/processed/v1` doit contenir trois fichiers :

  * `train.parquet` → données d’entraînement
  * `val.parquet` → données de validation
  * `test.parquet` → données de test
* Le script va charger ces fichiers pour entraîner et évaluer les modèles.

---

### 3️⃣ `--phase all`

* Indique **quelle phase du pipeline exécuter**.
* Options possibles :

  * `baseline` → entraîner les modèles avec les paramètres par défaut.
  * `finetune` → fine-tuning (optimisation d’hyperparamètres) sur les meilleurs modèles baseline.
  * `ensemble` → créer des modèles d’ensemble (stacking / voting) à partir des meilleurs modèles.
  * `all` → exécuter **toutes les phases** (baseline + fine-tuning + ensemble).

---

### 4️⃣ `--top-n 3`

* Utilisé pendant la **phase de fine-tuning**.
* Indique que le script doit **fine-tuner les 3 meilleurs modèles baseline** (triés par performance sur le set de validation).

---

### 5️⃣ `--register-models`

* Flag pour **enregistrer tous les modèles entraînés dans MLflow Registry**.
* Sans ce flag, seul le meilleur modèle pourrait être enregistré.

---

### 6️⃣ `--auto-promote`

* Flag pour **promouvoir automatiquement le meilleur modèle vers le stage “Production”** si ses métriques sont meilleures que le modèle actuel en production.
* Si tu passes `--no-auto-promote` à la place, le modèle sera juste enregistré mais restera en staging pour validation manuelle.




python src\data\features.py --seasons 2015-2016 2016-2017 2017-2018 2018-2019 2019-2020 2020-2021 2021-2022 2022-2023 --output-dir data\processed\v1





deepchecks_validator.py Vérifier qualité donnéespython ... --mode full
drift_detection.pyComparer 2 versionspython ... --split train
integrated_monitoring.pyCheck completpython ... --mode pre-training